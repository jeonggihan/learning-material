# âœ… 6. QueryDSL ì—°ë™ (Spring Boot 3 ê¸°ì¤€)

QueryDSLì€ íƒ€ì… ì•ˆì •ì„±(type-safe)ì„ ë³´ì¥í•˜ëŠ” **JPQL ë¹Œë”**ë¡œ, ì»´íŒŒì¼ íƒ€ì„ì— ì¿¼ë¦¬ ì˜¤ë¥˜ë¥¼ ì¡ì•„ë‚¼ ìˆ˜ ìˆê³ , ê°€ë…ì„±ê³¼ ì¬ì‚¬ìš©ì„± ì¸¡ë©´ì—ì„œë„ JPAì˜ ì‹¤ë¬´ í™œìš©ì„±ì„ í¬ê²Œ í–¥ìƒì‹œì¼œì¤ë‹ˆë‹¤.

---

## ğŸ”§ 1. Gradle ì˜ì¡´ì„± ì„¤ì • (QueryDSL 5)

Spring Boot 3.x + Jakarta Persistence(Jakarta EE) í™˜ê²½ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•©ë‹ˆë‹¤:

```java
// build.gradle
dependencies {
    implementation("com.querydsl:querydsl-jpa:5.0.0:jakarta")
    kapt("com.querydsl:querydsl-apt:5.0.0:jakarta")
    implementation("jakarta.annotation:jakarta.annotation-api")
    implementation("jakarta.persistence:jakarta.persistence-api")
}
```

> ğŸ’¡ Maven ì‚¬ìš©ìëŠ” `apt-maven-plugin` ë˜ëŠ” `querydsl-maven-plugin`ì„ ì„¤ì •í•´ë„ ë©ë‹ˆë‹¤.

---

## ğŸ—ï¸ 2. Entity & Q í´ë˜ìŠ¤ ìƒì„±

```java
@Entity
public class Member {
    @Id
    @GeneratedValue
    private Long id;

    private String username;
    private int age;
}
```

ë¹Œë“œ í›„ `QMember` í´ë˜ìŠ¤ê°€ `build/generated/.../QMember.java` ê²½ë¡œì— ìë™ ìƒì„±ë©ë‹ˆë‹¤.

---

## ğŸ§° 3. JPAQueryFactory ë“±ë¡

```java
@Configuration
public class QuerydslConfig {

    @PersistenceContext
    private EntityManager em;

    @Bean
    public JPAQueryFactory jpaQueryFactory() {
        return new JPAQueryFactory(em);
    }
}
```

---

## ğŸ§ª 4. ê¸°ë³¸ ì‚¬ìš© ì˜ˆ

```java
@Service
@RequiredArgsConstructor
public class MemberService {

    private final JPAQueryFactory query;

    public List<Member> findAdults() {
        QMember member = QMember.member;

        return query.selectFrom(member)
                    .where(member.age.goe(18))
                    .fetch();
    }
}
```

---

## ğŸ› ï¸ 5. ì‹¤ë¬´ íŒ

* **ì •ì  import**: `QMember.member` â†’ `import static ...QMember.member;`
* **ë™ì  ì¿¼ë¦¬**: `BooleanBuilder` ë˜ëŠ” `where(...)` ë‹¤ì¤‘ ì¡°ê±´ ì‚¬ìš©
* **í˜ì´ì§•**: `offset()`, `limit()` + `fetchResults()` â†’ Spring Data Pageableê³¼ í†µí•© ê°€ëŠ¥

---

## âœ… ë§ˆë¬´ë¦¬

QueryDSLì€ ì‹¤ë¬´ì—ì„œ ë³µì¡í•œ ì¡°ê±´ ì¿¼ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ë„êµ¬ì…ë‹ˆë‹¤.
Spring Boot 3ì—ì„œëŠ” `jakarta.persistence` ê¸°ë°˜ìœ¼ë¡œ ì„¤ì •ì„ ì¡°ì •í•´ì•¼ í•˜ë©°, ë¹Œë“œ ë„êµ¬ì— ë§ê²Œ ì»´íŒŒì¼ ì„¤ì •ì„ ê¼¼ê¼¼íˆ ì ìš©í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

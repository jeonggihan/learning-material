# ✅ Chapter 3. Classes and Interfaces

이 장에서는 클래스와 인터페이스의 설계 및 구성 원칙을 다룬다. 잘 설계된 클래스는 재사용성과 유지보수성이 높고, 오류 발생 가능성을 줄인다.

## 📌 접근 제어 최소화 (Information Hiding)

* 외부에서 불필요하게 내부 구현에 접근하지 못하도록 제한해야 한다.
* 가능한 한 모든 필드는 `private`으로 선언.
* 클래스, 멤버 클래스, 메서드, 필드는 필요한 최소 수준으로 `public`, `protected`, `package-private`, `private` 순으로 제어.
* `public static final` 필드는 상수일 때만 허용.

## 📌 변경 가능성 제한 (Immutability)

* 불변 클래스는 스레드 안정성과 오류 방지에 탁월하다.
* 불변 객체 설계 원칙:

    1. 필드를 `final`로 선언
    2. 생성자에서 모든 필드 초기화
    3. 변경자(setter)를 제공하지 않음
    4. 자신 외부의 가변 객체를 참조하지 않거나, 방어적 복사
* 대표 예시: `String`, `Integer`, `LocalDate`

## 📌 상속보다 컴포지션 우선

* 상속은 캡슐화를 약화시키고, 부모 클래스 변경 시 하위 클래스에 영향을 줌
* 컴포지션(다른 객체를 필드로 포함)으로 기능 위임이 더 안전함
* 예:

  ```java
  class InstrumentedSet<E> extends ForwardingSet<E> {
      private int addCount = 0;
      public boolean add(E e) {
          addCount++;
          return super.add(e);
      }
  }
  ```

## 📌 추상 클래스 vs 인터페이스

* **인터페이스**는 다중 구현이 가능하고, 구조적 유연성 큼
* **추상 클래스**는 상태(필드)를 가질 수 있고, 일부 구현 제공 가능
* Java 8 이상에서는 인터페이스에 `default` 메서드를 정의할 수 있어 구현 유연성이 증가
* 인터페이스는 역할 중심, 추상 클래스는 계층 구조 중심일 때 적합

## 📌 정적 멤버 클래스 권장

* 내부 클래스는 바깥 클래스 참조 여부에 따라 다음으로 나뉨:

    * **정적(static) 멤버 클래스**: 바깥 클래스의 인스턴스에 의존하지 않음
    * **비정적 멤버 클래스**, **지역 클래스**, **익명 클래스**
* 바깥 인스턴스를 참조할 필요 없으면 `static`으로 선언해야 메모리 누수 및 복잡도 감소

클래스와 인터페이스를 올바르게 설계하면 유연하고 확장 가능하며 유지보수하기 쉬운 코드를 만들 수 있다. 이 장의 원칙은 도메인 객체나 API를 설계할 때 꼭 적용해야 할 핵심 지침들이다.
